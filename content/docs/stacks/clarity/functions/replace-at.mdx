---
title: replace-at?
description: Replacing an element at a specific index in a sequence in Clarity smart contracts.
---

## Function Signature

```clarity
(replace-at? sequence index new-element)
```

- Input: `sequence_A, uint, A`
- Output: `(response sequence_A uint)`

## Why it matters

The `replace-at?` function is crucial for:

1. Modifying elements in a sequence at a specific index.
2. Implementing logic that requires updating sequences.
3. Ensuring data integrity by validating index and element replacement.
4. Simplifying the process of handling sequence modifications in smart contracts.

## When to use it

Use `replace-at?` when you need to:

- Modify an element in a sequence at a specific index.
- Implement logic that requires updating sequences.
- Validate the index and element replacement in your smart contract.
- Handle sequence modification operations.

## Best Practices

- Ensure the `index` is within the bounds of the sequence.
- Use meaningful variable names for better readability.
- Combine with other sequence functions for comprehensive sequence management.
- Handle the possible error cases to ensure robust contract behavior.

## Practical Example: Replacing an Element in a List

Let's implement a function that replaces an element in a list at a specific index:

```clarity
(define-public (replace-element (lst (list 5 int)) (idx uint) (new-element int))
  (replace-at? lst idx new-element)
)

;; Usage
(replace-element (list 1 2 3 4 5) u2 10) ;; Returns (ok (1 2 10 4 5))
(replace-element (list 1 2 3 4 5) u5 10) ;; Returns (err u1) because the index is out of bounds
```

This example demonstrates:
1. Using `replace-at?` to modify an element in a list at a specific index.
2. Implementing a public function to handle the element replacement.
3. Handling both successful and error cases.

## Common Pitfalls

1. Using `replace-at?` with an index that is out of bounds, causing the operation to fail.
2. Assuming the sequence will always be valid, leading to unhandled error cases.
3. Not handling all possible conditions, resulting in incomplete sequence management.
4. Overlooking the need for proper error handling and validation.

## Related Functions

- `append`: Adds an element to the end of a list.
- `index-of?`: Returns the first index at which an item can be found in a sequence.
- `get`: Retrieves an element from a sequence at a specific index.

## Conclusion

The `replace-at?` function is a fundamental tool for modifying elements in sequences in Clarity smart contracts. It allows developers to update sequences, ensuring data integrity and simplifying sequence handling. When used effectively, `replace-at?` enhances the reliability and maintainability of your smart contract code by providing a clear and concise way to handle sequence modification operations.
