---
title: log2
description: Calculate the base-2 logarithm of a number in Clarity smart contracts.
---

## Function Signature

```clarity
(log2 n)
```

- Input: `int | uint`
- Output: `int | uint`

## Why it matters

The `log2` function is crucial for:

1. Calculating the base-2 logarithm of a number.
2. Implementing mathematical operations that require logarithmic calculations.
3. Simplifying the process of determining the power of 2 needed to obtain a given value.
4. Facilitating operations that depend on logarithmic scaling.

## When to use it

Use `log2` when you need to:

- Calculate the base-2 logarithm of an integer or unsigned integer.
- Implement logic that depends on logarithmic calculations.
- Determine the power of 2 needed to obtain a given value.
- Simplify mathematical operations involving logarithms.

## Best Practices

- Ensure the input value is non-negative, as `log2` fails on negative numbers.
- Use meaningful variable names for better readability.
- Combine with other mathematical functions for comprehensive calculations.
- Be aware of the integer rounding behavior of `log2`.

## Practical Example: Calculating Logarithm of a Number

Let's implement a function that calculates the base-2 logarithm of a given number:

```clarity
(define-read-only (calculate-log2 (n uint))
  (log2 n)
)

;; Usage
(calculate-log2 u8) ;; Returns u3
(calculate-log2 u16) ;; Returns u4
```

This example demonstrates:
1. Using `log2` to calculate the base-2 logarithm of a given number.
2. Implementing a read-only function to return the logarithm.
3. Handling both small and large input values.

## Common Pitfalls

1. Using `log2` on negative numbers, causing the function to fail.
2. Assuming the result will always be an integer, leading to incorrect expectations.
3. Not handling all possible conditions, resulting in incomplete calculations.
4. Overlooking the need for proper error handling and validation.

## Related Functions

- `sqrti`: Returns the largest integer that is less than or equal to the square root of a number.
- `pow`: Raises a number to the power of another number.
- `sqrt`: Returns the square root of a number.

## Conclusion

The `log2` function is a fundamental tool for calculating the base-2 logarithm of numbers in Clarity smart contracts. It allows you to perform logarithmic calculations, enabling robust and comprehensive mathematical operations. When used effectively, `log2` enhances the reliability and maintainability of your smart contract code by providing a clear and concise way to manage logarithmic calculations.
