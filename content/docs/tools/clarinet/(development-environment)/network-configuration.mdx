---
title: Network Configuration
description: Configure Clarinet's development network settings
---

## Overview

Clarinet's devnet is highly configurable to match your development needs. This guide covers how to customize network settings, configure services, and optimize for different scenarios.

## Configuration Files

### Devnet.toml

The main configuration file for devnet settings:

```toml
[network]
name = "devnet"
orchestrator_port = 20445
bitcoin_node_p2p_port = 18444
bitcoin_node_rpc_port = 18443
stacks_node_p2p_port = 20444
stacks_node_rpc_port = 20443
stacks_api_port = 3999
stacks_api_events_port = 3700
postgres_port = 5432
postgres_username = "postgres"
postgres_password = "postgres"
postgres_database = "postgres"
bitcoin_explorer_port = 8001
stacks_explorer_port = 3020
bitcoin_node_username = "devnet"
bitcoin_node_password = "devnet"
miner_mnemonic = "twice kind fence tip hidden tilt action fragile skin nothing glory cousin green tomorrow spring wrist shed math olympic multiply hip blue scout claw"
miner_derivation_path = "m/44'/5757'/0'/0/0"
faucet_mnemonic = "shadow private easily thought say logic fault paddle word top book during ignore notable orange flight clock image wealth health outside kitten belt reform"
faucet_derivation_path = "m/44'/5757'/0'/0/0"

[network.devnet]
bitcoin_controller_block_time = 30_000
working_dir = "tmp/devnet"
stacks_node_events_observers = ["host.docker.internal:3700"]
stacks_api_endpoint = "host.docker.internal:3999"
bitcoin_node_wait = 1000
```

### Settings.toml

Project-specific network settings:

```toml
[network]
name = "devnet"
deployment_fee_rate = 10

[network.devnet]
disable_bitcoin_explorer = false
disable_stacks_explorer = false
disable_stacks_api = false
# Add custom settings here
```

## Network Components

### Bitcoin Node Configuration

Configure the Bitcoin regtest node:

```toml
# Control block time (milliseconds)
bitcoin_controller_block_time = 30_000  # 30 seconds

# Custom Bitcoin node settings
bitcoin_node_username = "custom_user"
bitcoin_node_password = "custom_pass"
bitcoin_node_p2p_port = 18444
bitcoin_node_rpc_port = 18443
```

### Stacks Node Configuration

Configure the Stacks node:

```toml
# Stacks node ports
stacks_node_p2p_port = 20444
stacks_node_rpc_port = 20443

# Event observers
stacks_node_events_observers = [
  "host.docker.internal:3700",
  "localhost:4000"  # Custom observer
]
```

### API Configuration

Configure the Stacks Blockchain API:

```toml
stacks_api_port = 3999
stacks_api_events_port = 3700
stacks_api_endpoint = "host.docker.internal:3999"

# Disable API if not needed
disable_stacks_api = false
```

## Mining Configuration

### Block Time

Control how often blocks are mined:

```toml
# Fast mining (1 second blocks)
bitcoin_controller_block_time = 1_000

# Standard mining (30 second blocks)
bitcoin_controller_block_time = 30_000

# Slow mining (2 minute blocks)
bitcoin_controller_block_time = 120_000
```

### Miner Account

Configure the miner account:

```toml
miner_mnemonic = "your twelve word mnemonic phrase here"
miner_derivation_path = "m/44'/5757'/0'/0/0"
```

## Account Configuration

### Faucet Account

The faucet provides STX to test accounts:

```toml
faucet_mnemonic = "your faucet mnemonic phrase"
faucet_derivation_path = "m/44'/5757'/0'/0/0"
```

### Custom Accounts

Add custom accounts in `Clarinet.toml`:

```toml
[accounts.custom_wallet]
mnemonic = "custom wallet mnemonic phrase"
balance = 1_000_000_000_000  # 1M STX

[accounts.deployer]
mnemonic = "<YOUR_DEPLOYER_MNEMONIC>"
balance = 100_000_000_000  # 100K STX
```

## Service Management

### Enable/Disable Services

Control which services run:

```toml
# Disable unnecessary services for faster startup
disable_bitcoin_explorer = true
disable_stacks_explorer = true
disable_stacks_api = false  # Keep API for contract calls
```

### Port Configuration

Avoid conflicts by customizing ports:

```toml
# Change all ports to avoid conflicts
orchestrator_port = 30445
bitcoin_node_p2p_port = 28444
bitcoin_node_rpc_port = 28443
stacks_node_p2p_port = 30444
stacks_node_rpc_port = 30443
stacks_api_port = 4999
postgres_port = 6432
```

## Performance Optimization

### Fast Development Mode

Optimize for quick iteration:

```toml
# Fast blocks
bitcoin_controller_block_time = 1_000

# Disable explorers
disable_bitcoin_explorer = true
disable_stacks_explorer = true

# Minimal logging
log_level = "error"
```

### Full Testing Mode

Enable all features for integration testing:

```toml
# Realistic block time
bitcoin_controller_block_time = 30_000

# Enable all services
disable_bitcoin_explorer = false
disable_stacks_explorer = false
disable_stacks_api = false

# Verbose logging
log_level = "debug"
```

## Docker Configuration

### Custom Docker Network

Create isolated networks:

```bash
# Create custom network
docker network create clarinet-dev

# Update configuration
docker_network = "clarinet-dev"
```

### Resource Limits

Control resource usage:

```toml
# Limit CPU and memory
stacks_node_cpu_limit = "1.0"
stacks_node_memory_limit = "2g"
bitcoin_node_cpu_limit = "0.5"
bitcoin_node_memory_limit = "1g"
```

## Environment Variables

Override configuration with environment variables:

```bash
# Override ports
export CLARINET_BITCOIN_NODE_RPC_PORT=28443
export CLARINET_STACKS_NODE_RPC_PORT=30443

# Override block time
export CLARINET_BITCOIN_CONTROLLER_BLOCK_TIME=5000

# Run with overrides
clarinet devnet start
```

## Multiple Configurations

### Per-Environment Settings

Create environment-specific configurations:

```toml
# settings.development.toml
[network.devnet]
bitcoin_controller_block_time = 1_000
disable_bitcoin_explorer = true

# settings.testing.toml
[network.devnet]
bitcoin_controller_block_time = 30_000
disable_bitcoin_explorer = false
```

### Loading Configurations

```bash
# Use specific configuration
clarinet devnet start --config settings.testing.toml
```

## Troubleshooting

### Port Conflicts

Check for port usage:

```bash
# Check if port is in use
lsof -i :3999

# Kill process using port
kill -9 $(lsof -t -i:3999)
```

### Reset Configuration

Start fresh:

```bash
# Remove all devnet data
clarinet devnet clean

# Reset to defaults
rm -rf tmp/devnet
clarinet devnet start
```

### Debug Mode

Enable detailed logging:

```toml
log_level = "trace"
enable_debug_endpoints = true
```

## Best Practices

1. **Version Control**: Keep configuration files in git
2. **Documentation**: Document custom settings
3. **Consistency**: Use same settings across team
4. **Security**: Never commit mnemonics for real networks
5. **Optimization**: Disable unused services

## Next Steps

- Start [Running Devnet](/tools/clarinet/running-devnet)
- Learn about [Connecting to APIs](/tools/clarinet/connecting-to-apis)
- Configure [Local Wallets](/tools/clarinet/using-local-wallets)